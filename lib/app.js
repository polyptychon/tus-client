!function t(e,i,r){function n(s,u){if(!i[s]){if(!e[s]){var h="function"==typeof require&&require;if(!u&&h)return h(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=i[s]={exports:{}};e[s][0].call(l.exports,function(t){var i=e[s][1][t];return n(i?i:t)},l,l.exports,t,e,i,r)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t,e){var i,r;i=t("jquery"),r=function(){function t(e,r){this.file=e,this.options=i.extend(t.DEFAULTS,r),this.fileUrl=null,this._jqXHR=null,this._deferred=i.Deferred(),this._deferred.promise(this)}return t.DEFAULTS={path:"",headers:{}},t.prototype._checkFileExists=function(){var t,e;return t=i.extend({"file-path":""+this.options.path+"/"+this.file.name},this.options.headers),e={type:"HEAD",url:this.options.endpoint,cache:!1,headers:t},i.ajax(e).fail(function(t){return function(e,i){return 404===e.status?t._emitFail("File not found: "+i,e.status):t._emitFail(i,e.status)}}(this)).done(function(t){return function(){return t._emitDone()}}(this))},t.prototype.stop=function(){return null!=this._jqXHR?this._jqXHR.abort():void 0},t.prototype._emitDone=function(){return this._deferred.resolveWith(this,[this.fileUrl,this.file])},t.prototype._emitFail=function(t,e){return this._deferred.rejectWith(this,[t,e])},t}(),e.exports=r},{jquery:5}],2:[function(t,e){var i,r,n,o={}.hasOwnProperty,s=function(t,e){function i(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};i=t("jquery"),n=t("./ResumableUpload.coffee"),r=function(t){function e(t,r){r=i.extend(e.DEFAULTS,r),this._chunkTimer=-1,e.__super__.constructor.call(this,t,r)}return s(e,t),e.DEFAULTS={chunkSize:1,minChunkSize:51200,maxChunkSize:209715200,path:""},e.prototype._getChunkSize=function(){var t,e;return this._chunkTimer<0?t=this.options.minChunkSize:(e=(new Date).getTime()-this._chunkTimer,t=Math.round(this.options.chunkSize/e*1e3)),this._chunkTimer=(new Date).getTime(),Math.min(Math.max(this.options.minChunkSize,t),this.options.maxChunkSize)},e.prototype._uploadFile=function(t){return this.options.chunkSize&&(this.options.chunkSize=this._getChunkSize()),e.__super__._uploadFile.call(this,t)},e.prototype._emitDone=function(){return this._moveFile()},e.prototype._moveDone=function(t){return this._deferred.resolveWith(this,[this.fileUrl,this.file,t])},e.prototype._moveFile=function(){var t,e;return t=i.extend({"Final-Length":this.file.size,"file-path":""+this.options.path+"/"+this.file.name},this.options.headers),e={type:"PUT",url:this.fileUrl,cache:!1,headers:t},i.ajax(e).fail(function(t){return function(e,i){return 404===e.status?t._emitFail("Could not move file resource: "+i,e.status):t._emitFail("Could not head at file resource: "+i,e.status)}}(this)).done(function(t){return function(e,i,r){var n,o;return n=r.getResponseHeader("Checksum"),(o=r.getResponseHeader("Location"))?(t.fileUrl=o,t._moveDone(n)):_emitFail("Could not get url for file resource. "+i,r.status)}}(this))},e}(n),e.exports=r},{"./ResumableUpload.coffee":3,jquery:5}],3:[function(t,e){var i,r;i=t("jquery"),r=function(){function t(e,r){this.file=e,this.options=i.extend(t.DEFAULTS,r),this.fileUrl=null,this.bytesWritten=null,this._jqXHR=null,this._deferred=i.Deferred(),this._deferred.promise(this)}return t.SUPPORT=function(){return!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice&&!Blob.prototype.slice)},t.DEFAULTS={resumable:!0,headers:{}},t.prototype._start=function(){return this.options.resumable&&this.options.resetBefore!==!0||this._urlCache(!1),(this.fileUrl=this._urlCache())?this._head():this._post()},t.prototype._post=function(){var t,e;return t=i.extend({"Final-Length":this.file.size},this.options.headers),e={type:"POST",url:this.options.endpoint,headers:t},i.ajax(e).fail(function(t){return function(e,i){return t._emitFail("Could not post to file resource "+t.options.endpoint+". "+i,e.status)}}(this)).done(function(t){return function(e,i,r){var n;return(n=r.getResponseHeader("Location"))?(t.fileUrl=n,t._uploadFile(0)):_emitFail("Could not get url for file resource. "+i,r.status)}}(this))},t.prototype._head=function(){var t;return t={type:"HEAD",url:this.fileUrl,cache:!1,headers:this.options.headers},i.ajax(t).fail(function(t){return function(e,i){return 404===e.status?t._post():t._emitFail("Could not head at file resource: "+i,e.status)}}(this)).done(function(t){return function(e,i,r){var n,o;return o=r.getResponseHeader("Offset"),n=parseInt(o,10)?parseInt(o):0,t._uploadFile(n)}}(this))},t.prototype._uploadFile=function(t){var e,r,n,o,s,u,h;return this.bytesWritten=t,this.bytesWritten===this.file.size?(this._emitProgress(),this._emitDone()):(this._urlCache(this.fileUrl),this._emitProgress(),r=this.bytesWritten,s=this.file.size,this.options.chunkSize&&(s=Math.min(s,t+this.options.chunkSize)),u=this.file.slice||this.file.webkitSlice||this.file.mozSlice,e=u.call(this.file,t,s,this.file.type),h=i.ajaxSettings.xhr(),n=i.extend({Offset:t,"Content-Type":"application/offset+octet-stream"},this.options.headers),o={type:"PATCH",url:this.fileUrl,data:e,processData:!1,contentType:this.file.type,cache:!1,headers:n,xhr:function(){return h}},i(h.upload).bind("progress",function(t){return function(e){return t.bytesWritten=r+e.originalEvent.loaded,t._emitProgress(e)}}(this)),this._jqXHR=i.ajax(o).fail(function(t){return function(e,i,r){var n;return n=e.responseText||i||r,t._emitFail(n,e.status)}}(this)).done(function(t){return function(){return s===t.file.size?(t.options.resetAfter&&t._urlCache(!1),t._emitDone()):t._uploadFile(s)}}(this)))},t.prototype.stop=function(){return null!=this._jqXHR?this._jqXHR.abort():void 0},t.prototype._emitProgress=function(t){return null==t&&(t=null),this._deferred.notifyWith(this,[t,this.bytesWritten,this.file.size])},t.prototype._emitDone=function(){return this._deferred.resolveWith(this,[this.fileUrl,this.file])},t.prototype._emitFail=function(t,e){return this._deferred.rejectWith(this,[t,e])},t.prototype._urlCache=function(t){var e,i,r;if(i=this.options.fingerprint,null==i&&(i=this.fingerprint(this.file)),t===!1)return localStorage.removeItem(i);if(t){r=!1;try{r=localStorage.setItem(i,t)}catch(n){e=n}return r}return localStorage.getItem(i)},t.prototype.fingerprint=function(t){return"tus-"+t.name+"-"+t.type+"-"+t.size},t}(),e.exports=r},{jquery:5}],4:[function(t,e){var i,r,n;i=t("jquery"),n=t("./PolyResumableUpload.coffee"),r=t("./CheckFileExists.coffee"),e.exports={upload:function(t,e){var i;return i=new n(t,e),t&&i._start(),i},check:function(t,e){var i;return i=new r(t,e),t&&i._checkFileExists(),i}}},{"./CheckFileExists.coffee":1,"./PolyResumableUpload.coffee":2,jquery:5}],5:[function(){},{}]},{},[4]);